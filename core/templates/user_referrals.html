{% extends 'base.html' %}
{% block title %}Referrals for {{ selected_user.username }} - Network Marketing{% endblock %}
{% block hero_title %}Referrals for {{ selected_user.username }}{% endblock %}
{% block hero_description %}View the network of {{ selected_user.username }}.{% endblock %}
{% block content %}
    <section class="category-section">
        <h2 class="category-title">Referrals for {{ selected_user.username }}</h2>
        {% if messages %}
            {% for message in messages %}
                <div class="alert alert-{{ message.tags }} alert-dismissible fade show" role="alert">
                    {{ message }}
                    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                </div>
            {% endfor %}
        {% endif %}
        <!-- Direct Referrals -->
        <h3>Direct Referrals</h3>
        {% if direct_referrals %}
            <ul>
                {% for referral in direct_referrals %}
                    <li>
                        <a href="{% url 'user_referrals' referral.username %}">{{ referral.username }}</a>
                        ({{ referral.email }})
                    </li>
                {% endfor %}
            </ul>
        {% else %}
            <p>No direct referrals yet.</p>
        {% endif %}
        <!-- All Team Members -->
        <h3>All Team Members</h3>
        {% if team_members %}
            <ul>
                {% for member in team_members %}
                    <li>
                        <a href="{% url 'user_referrals' member.username %}">{{ member.username }}</a>
                        ({{ member.email }}, Parent: {{ member.parent.username|default:"None" }}, Position: {{ member.position|default:"None" }})
                    </li>
                {% endfor %}
            </ul>
        {% else %}
            <p>No team members yet.</p>
        {% endif %}
        <a href="{% url 'dashboard' %}" class="btn btn-secondary">Back to Dashboard</a>
    </section>
{% endblock %}